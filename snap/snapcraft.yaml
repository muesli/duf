name: duf
base: core18
adopt-info: duf # Obtain version metadata from the 'duf' part
license: MIT
summary: Disk Usage/Free Utility
description: |
  duf is a user-friendly text-mode disk usage and free space utility. It
  has colorful output and adjust to your text terminal's width. 
  You can sort your results according to your needs. 
  You can group together and filter your devices. Can output to JSON.

grade: devel # must be 'stable' to release into candidate/stable channels
confinement: strict # use 'strict' once you have the right plugs and slots

parts:
  license: # Include the license in the snap package
    plugin: dump
    source: https://github.com/muesli/duf.git
    source-type: git
    override-pull: | # Checkout the latest tag (=latest release)
      snapcraftctl pull
      VER=$(git describe --abbrev=0 --tags)
      git checkout $VER
    prime: 
      - LICENSE

  duf:
    plugin: go
    go-importpath: parts/duf
    source: https://github.com/muesli/duf.git
    source-type: git
    override-pull: | # Checkout the latest tag (=latest release) and set the snap's version string
      snapcraftctl pull
      VER=$(git describe --abbrev=0 --tags)
      git checkout $VER
      snapcraftctl set-version $VER 
    

apps:
  duf:
    command: duf
    plugs:
      - mount-observe
